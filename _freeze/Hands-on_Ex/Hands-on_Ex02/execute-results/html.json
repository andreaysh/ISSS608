{
  "hash": "1240ab56cb2c048b435e9e3ca6690b62",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Hands-on Exercise 02\"\nauthor: \"Andrea Yeo\"\ndate-modified: \"last-modified\"\nexecute:\n  echo: true\n  eval: true\n  warning: false\n  freeze: true\n---\n\n\n\n[With the assistance of ChatGPT]{style=\"font-size: 14px;\"}\n\n## 2. Beyond ggplot2 Fundamentals\n\n### 2.1 Learning Outcome\n\nIn this chapter, we will be exploring several ggplot2 extensions to enhance the elegance and effectiveness of statistical graphics. The objectives will be to:\n\n-   Use the ggrepel package to control annotation placement on graphs.\n-   Create publication-quality visuals with ggthemes and hrbrthemes.\n-   Combine multiple ggplot2 graphs into composite figures using the patchwork package.\n\n### 2.2 Getting started\n\n#### 2.2.1 Installing and loading the required libraries\n\nBeside tidyverse, below are the four packages that will be used.\n\n-   **ggrepel:** provides geoms for avoiding overlapping text labels in ggplot2.\n-   **ggthemes:** offers additional themes, geoms, and scales for enhancing ggplot2 visuals.\n-   **hrbrthemes:** focuses on typography-centric themes and components for ggplot2.\n-   **patchwork:** allow for the creation of composite figures using ggplot2\n\nCode to check if the packages have been installed, and to load them into our R environment.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(ggrepel, patchwork,\n               ggthemes, hrbrthemes,\n               tidyverse)\n```\n:::\n\n\n\n#### 2.2.2 Importing data\n\n::: callout-note\n-   This section data is the same dataset used in [Hands-on_Ex01](Hands-on_Ex01.html)\n:::\n\nWe will use a data file called *Exam_data.csv* which contains the year-end exam results of a group of Primary 3 students from a local school.\n\nThe code below will be used to import the *\"exam_data.csv\"* file into the R environment using the [read_csv()]{.underline} function from the [**readr**]{.underline} package, which is part of the tidyverse.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_data <- read_csv(\"data/Exam_data.csv\", show_col_types = FALSE)\n```\n:::\n\n\n\nWe will check the dataset using below\n\n-   `glimpse()`: provides a transposed overview of a dataset, showing variables and their types in a concise format.\n-   `head()`: displays the first few rows of a dataset (default is 6 rows) to give a quick preview of the data.\n-   `summary()`: generates a statistical summary of each variable, including measures like mean, median, and range for numeric data.\n-   `duplicated()`:returns a logical vector indicating which elements or rows in a vector or data frame are duplicates.\n-   `colSums(is.na())`: counts the number of missing values (NA) in each column of the data frame.\n-   `spec()`: use `spec()` to quickly inspect the column\n\n::: panel-tabset\n## glimpse()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(exam_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 322\nColumns: 7\n$ ID      <chr> \"Student321\", \"Student305\", \"Student289\", \"Student227\", \"Stude…\n$ CLASS   <chr> \"3I\", \"3I\", \"3H\", \"3F\", \"3I\", \"3I\", \"3I\", \"3I\", \"3I\", \"3H\", \"3…\n$ GENDER  <chr> \"Male\", \"Female\", \"Male\", \"Male\", \"Male\", \"Female\", \"Male\", \"M…\n$ RACE    <chr> \"Malay\", \"Malay\", \"Chinese\", \"Chinese\", \"Malay\", \"Malay\", \"Chi…\n$ ENGLISH <dbl> 21, 24, 26, 27, 27, 31, 31, 31, 33, 34, 34, 36, 36, 36, 37, 38…\n$ MATHS   <dbl> 9, 22, 16, 77, 11, 16, 21, 18, 19, 49, 39, 35, 23, 36, 49, 30,…\n$ SCIENCE <dbl> 15, 16, 16, 31, 25, 16, 25, 27, 15, 37, 42, 22, 32, 36, 35, 45…\n```\n\n\n:::\n:::\n\n\n\n## head()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(exam_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 7\n  ID         CLASS GENDER RACE    ENGLISH MATHS SCIENCE\n  <chr>      <chr> <chr>  <chr>     <dbl> <dbl>   <dbl>\n1 Student321 3I    Male   Malay        21     9      15\n2 Student305 3I    Female Malay        24    22      16\n3 Student289 3H    Male   Chinese      26    16      16\n4 Student227 3F    Male   Chinese      27    77      31\n5 Student318 3I    Male   Malay        27    11      25\n6 Student306 3I    Female Malay        31    16      16\n```\n\n\n:::\n:::\n\n\n\n## summary()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(exam_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n      ID               CLASS              GENDER              RACE          \n Length:322         Length:322         Length:322         Length:322        \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n    ENGLISH          MATHS          SCIENCE     \n Min.   :21.00   Min.   : 9.00   Min.   :15.00  \n 1st Qu.:59.00   1st Qu.:58.00   1st Qu.:49.25  \n Median :70.00   Median :74.00   Median :65.00  \n Mean   :67.18   Mean   :69.33   Mean   :61.16  \n 3rd Qu.:78.00   3rd Qu.:85.00   3rd Qu.:74.75  \n Max.   :96.00   Max.   :99.00   Max.   :96.00  \n```\n\n\n:::\n:::\n\n\n\n## duplicated()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_data[duplicated(exam_data),]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 0 × 7\n# ℹ 7 variables: ID <chr>, CLASS <chr>, GENDER <chr>, RACE <chr>,\n#   ENGLISH <dbl>, MATHS <dbl>, SCIENCE <dbl>\n```\n\n\n:::\n:::\n\n\n\n## colSum(is.na(*dataset*))\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolSums(is.na(exam_data))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     ID   CLASS  GENDER    RACE ENGLISH   MATHS SCIENCE \n      0       0       0       0       0       0       0 \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nspec(exam_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\ncols(\n  ID = col_character(),\n  CLASS = col_character(),\n  GENDER = col_character(),\n  RACE = col_character(),\n  ENGLISH = col_double(),\n  MATHS = col_double(),\n  SCIENCE = col_double()\n)\n```\n\n\n:::\n:::\n\n\n:::\n\nThe exam_data tibble contains seven attributes, as shown above:\n\n-   **Categorical attributes:** ID, CLASS, GENDER, RACE\n\n-   **Continuous attributes:** MATHS, ENGLISH, SCIENCE\n\n### 2.3 Beyond ggplot2 Annotation: ggrel\n\nAnnotating statistical graphs can be challenging, particularly when dealing with a large number of data points.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the code\"}\n ggplot(data=exam_data, \n       aes(x= MATHS, \n           y=ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm, \n              linewidth=0.5) +  \n  geom_label(aes(label = ID), \n             hjust = .5, \n             vjust = -.5) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n::: callout-note\n-   Replaced size=0.5 with linewidth-0.5 in the `geom_smooth()` function to align the code with the latest ggplot2 standards.\n:::\n\n[ggrepel](https://ggrepel.slowkow.com/) is an extension of ggplot2 that provides geoms to prevent overlapping text labels.\n\nIt replaces `geom_text()` with `geom_text_repel()` and `geom_label()` with `geom_label_repel()`, ensuring labels repel from each other, data points, and plot edges.This enhances the clarity and readability of the chart.\n\n#### 2.3.1 Working with ggrepel\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the code\"}\nggplot(data=exam_data, \n       aes(x= MATHS, \n           y=ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm, \n              size=0.5) +  \n  geom_label_repel(aes(label = ID), \n                   fontface = \"bold\") +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n::: callout-warning\nThere is a warning message:\n\n-   geom_smooth()\\` using formula = 'y \\~ x'\n\n-   Warning: ggrepel: 321 unlabeled data points (too many overlaps). Consider increasing max.overlaps\n\n-   the warning message means that `geom_label_repeal` function was unable to place labels for 321 data points because they are too close to each other.\n\nResponse:\n\n-   Option 1: Increase max.overlaps\n\n-   Option 2: Label only specific points which involves creating a new column that marks points to label and passing the column into `aes(label = ..)`\n\n-   Option 3: Potentially to reduce the point size or transparency with `geom_point()`\n:::\n\n#### 2.3.2 Further exploration with ggrepel\n\nLeveraging on Hands-on_Ex01, we added the below attributes:\n\n-   `geom_point:`customize the color = \"darkblue\" and changed the size = 0.5, with a solid circle shape where shape = 16.\n\n-   `geom_smooth:`changed the regression line, color = \"red\", made thicker size = 1, and to display as a dashed line, linetype = \"dashed\".\n\n-   Refer [here](https://www.sthda.com/english/wiki/ggplot2-point-shapes?utm_source=chatgpt.com) for the different ggplot2 point shapes.\n\n-   Refer [here](https://www.sthda.com/english/wiki/ggplot2-line-types-how-to-change-line-types-of-a-graph-in-r-software#google_vignette) for the different ggplot2 line types.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the code\"}\nlibrary(ggplot2)\nlibrary(ggrepel)\n\nggplot(data=exam_data, \n       aes(x= MATHS, \n           y=ENGLISH)) +\n  # Scatter plot with customized point appearance\n  geom_point(color = \"darkblue\", size = 0.5, shape = 16) +  # change point color, size, and shape\n  \n  # Linear regression line with customized color and line type\n  geom_smooth(method=lm, \n              size=1, \n              color=\"red\",    # line color\n              linetype=\"dashed\") +  # line style\n  geom_label_repel(aes(label = ID), \n                   fontface = \"bold\") +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n### 2.4 Beyond ggplot2 themes\n\nThere are 8 different [built-in themes](https://ggplot2.tidyverse.org/reference/ggtheme.html) within ggplot2. They are:\n\n-   `theme_gray():`default theme in ggplot2, with a gray background with white grid lines for readability.\n\n-   `theme_bw():` clean, minimalistic theme with a white background and black grid lines.\n\n-   `theme_classic():`simple theme with a white background and no grid lines.\n\n-   `theme_dark():`theme with a dark background and light-colored text and grid lines.\n\n-   `theme_light():`light background theme with light-colored grid lines.\n\n-   `theme_linedraw():`theme that uses black lines on a white background.\n\n-   `theme_minimal():`minimalist theme that reduces non-data elements.\n\n-   `theme_void():`clean theme with no background, grid lines, or axes.\n\n::: panel-tabset\n## theme_gray()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  theme_gray() +\n  ggtitle(\"Distribution of Maths scores\") \n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n## theme_bw()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  theme_bw() +\n  ggtitle(\"Distribution of Maths scores\")\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n\n## theme_classic()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  theme_classic() +\n  ggtitle(\"Distribution of Maths scores\") \n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n\n## theme_dark()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  theme_dark() +\n  ggtitle(\"Distribution of Maths scores\") \n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n\n## theme_light()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  theme_light() +\n  ggtitle(\"Distribution of Maths scores\") \n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\n## theme_linedraw()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  theme_linedraw() +\n  ggtitle(\"Distribution of Maths scores\") \n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n\n## theme_minimal()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  theme_minimal() +\n  ggtitle(\"Distribution of Maths scores\") \n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n\n## theme_void()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  theme_void() +\n  ggtitle(\"Distribution of Maths scores\") \n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n:::\n\nRefer to this [link](https://ggplot2.tidyverse.org/reference/#themes) to learn more about ggplot2 `Themes`\n\n#### 2.4.1 Working with ggtheme package\n\n[ggthemes](https://cran.r-project.org/web/packages/ggthemes/) offers a collection of [ggplot2 themes](https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/) that replicate the style of plots from the likes of Edward Tufte, Stephen Few, [FiveThirtyEight](https://abcnews.go.com/538), [The Economist](https://www.economist.com/graphic-detail), Stata, Excel, and [The Wall Street Journal](https://www.pinterest.com/wsjgraphics/wsj-graphics/), among others.\n\nBelow are some of the examples of the different themes available.\n\nRefer [here](https://www.rdocumentation.org/packages/ggthemes/versions/5.1.0) for the comprehensive list and descrptions of all available themes.\n\nInstall and load `ggthemes`packages\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"ggthemes\")\nlibrary(ggthemes)\n```\n:::\n\n\n\n::: panel-tabset\n## theme_economist()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_economist()\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\n\n## theme_wsj()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_wsj()\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n\n\n## theme_fivethirtyeight()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_fivethirtyeight()\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\n\n## theme_tufte()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_tufte()\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n\n\n## theme_excel()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_excel()\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n\n:::\n\nRefer to this [link](https://ggplot2.tidyverse.org/reference/#themes) to learn more about the ggplot2 `themes`\n\n#### 2.4.2 Working with hrbthemes package\n\nThe [hrbrthemes](https://cran.r-project.org/web/packages/hrbrthemes/hrbrthemes.pdf) package provides typography centric themes and theme components for ggplot2. This includes where labels are placed and the fonts used.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the code\"}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_ipsum()\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n:::\n\n\n\nThe second goal is to boost productivity in a production workflow, which is the intended setting for using the elements of hrbrthemes.\n\nRefer [here](https://cran.r-project.org/web/packages/hrbrthemes/index.html) to learn more.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the code\"}\ninstall.packages(\"hrbrthemes\")\nlibrary(hrbrthemes)\n\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_ipsum(axis_title_size = 18,\n              base_size = 15,\n              grid = \"Y\")\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n:::\n\n\n\n::: callout-tip\n## What can we learn from the cde chunk above?\n\n-   `axis_title_size`: sets the font size of the axis title to 18\n-   `base_size`: adjusts the default axis label size to 15\n-   `grid`: remove the x-axis grid lines\n:::\n\n### 2.5 Beyond single graph\n\nCreating multiple graphs is often necessary to convey a compelling visual story. Several ggplot2 extensions offer functions for combining multiple graphs into a single figure.\n\nIn this section, we will learn how to create a composite/ combined plot by merging multiple graphs. First, let create three statistical graphics by using the codes below.\n\n:::: panel-tabset\n## Histogram 1 - distribution of Maths scores\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the code\"}\np1 <- ggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") + \n  coord_cartesian(xlim=c(0,100)) +\n  ggtitle(\"Distribution of Maths scores\")\n\np1\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n:::\n\n\n\n## Histogram 2 - distribution of English scores\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the code\"}\np2 <- ggplot(data=exam_data, \n             aes(x = ENGLISH)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  coord_cartesian(xlim=c(0,100)) +\n  ggtitle(\"Distribution of English scores\")\n\np2\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-29-1.png){width=672}\n:::\n:::\n\n\n\n## Scatterplot - English VS Maths scores\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the code\"}\np3 <- ggplot(data=exam_data, \n             aes(x= MATHS, \n                 y=ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm, \n              linewidth=0.5) +  \n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")\n\np3\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-30-1.png){width=672}\n:::\n:::\n\n\n\n::: callout-note\n-   Replaced size=0.5 with linewidth-0.5 in the `geom_smooth()` function to align the code with the latest ggplot2 standards.\n:::\n::::\n\n#### 2.5.1 Creating composits graphics: pathwork methods\n\nThere are several ggplot2 extension’s functions that support the preparation of composite figures such as [`grid.arrange()`](https://cran.r-project.org/web/packages/gridExtra/vignettes/arrangeGrob.html) of **gridExtra** package and [`plot_grid()`](https://wilkelab.org/cowplot/reference/plot_grid.html) of [***cowplot***](https://wilkelab.org/cowplot/) package.\n\nIn this section, we will be using **Patchwork**, a ggplot2 extension specifically designed to combine multiple ggplot2 graphs into a single figure.\n\nThe **Patchwork** package offers a straightforward synatx, making it easy to create custom layouts. Key features include\n\n-   Two column layouts using `+` operator\n-   Subplot grouping using `()` operator\n-   Two-row layouts using `/` operator\n-   One-row layout using `|` operator\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"patchwork\")\nlibrary(patchwork)\n```\n:::\n\n\n\n#### 2.5.2 Combining two ggplot2 graphs\n\n::: panel-tabset\n## Using `+` operator\n\n`+` combines plots into a single row\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1+p2\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-32-1.png){width=672}\n:::\n:::\n\n\n\n## Using `()` operator\n\n`()` use for grouping and layout adjustments\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 + p2 + plot_layout(ncol=2,widths=c(1,2))\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-33-1.png){width=672}\n:::\n:::\n\n\n\n## Using `/` operator\n\n`/` use to stack plots into a single column\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1/p2\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-34-1.png){width=672}\n:::\n:::\n\n\n:::\n\n#### 2.5.3 Combining 2 or more ggplot2 graphs\n\nWe can also combine 2 or more ggplots graph in one composite figure.\n\n::: panel-tabset\n## Using `+`&`|`&`()` operator\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n(p1/p2) | p3\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-35-1.png){width=672}\n:::\n:::\n\n\n\nTo learn more about **Patchwork**, refer [here](https://patchwork.data-imaginist.com/articles/guides/assembly.html)\n:::\n\n#### 2.5.4 Creating a composite figure with tag\n\n**Patchwork** also includes auto-tagging capabilities to label subplots within a figure, making it easier to identify them in text.\n\n::: panel-tabset\n## Numerals\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the code\"}\n((p1 / p2) | p3) + \n  plot_annotation(tag_levels = 'I')\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-36-1.png){width=672}\n:::\n:::\n\n\n\n## Digits\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n((p1 / p2) | p3) + \n  plot_annotation(tag_levels = '1')\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-37-1.png){width=672}\n:::\n:::\n\n\n\n## Letters\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n((p1 / p2) | p3) + \n  plot_annotation(tag_levels = 'A')\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-38-1.png){width=672}\n:::\n:::\n\n\n\n## Customizing tags\n\n-   Using either `tag_prefix` and/ or `tag_suffix` to format tags\n-   Added the word \"Figure\" before each Roman numeral\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n((p1 / p2) | p3) + \n  plot_annotation(tag_levels = \"I\", tag_prefix = \"Figure \", tag_suffix = \"\")\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-39-1.png){width=672}\n:::\n:::\n\n\n:::\n\n#### 2.5.5 Creating figure with insert\n\nIn addition to arranging plots side-by-side based on a specified layout, the **Patchwork** package provides the `insert_element()` function.\n\nThis allows user to freely place one or more plots or graphic elements over or below another plot, offering greater flexibility in design.\n\nRefer [here](https://patchwork.data-imaginist.com/reference/inset_element.html) for the `insert_element` documentation.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np3 + inset_element(p2, \n                   left = 0.02, \n                   bottom = 0.7, \n                   right = 0.5, \n                   top = 1)\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-40-1.png){width=672}\n:::\n:::\n\n\n\n#### 2.5.6 Creating a composite figure by using patchwork and ggtheme\n\nThe figure below is created by combining **patchwork** and the other ggthemes packages.\n\n::: panel-tabset\n## theme_econmist()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npatchwork <- (p1 / p2) | p3\npatchwork & theme_economist() + \n  theme(plot.title=element_text(size =8),\n        axis.title.y=element_text(size = 9,\n                              angle = 0,\n                              vjust=0.9),\n        axis.title.x=element_text(size = 9))\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-41-1.png){width=672}\n:::\n:::\n\n\n\n## theme_wsj()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npatchwork <- (p1 / p2) | p3\npatchwork & theme_wsj() +\n  theme(plot.title=element_text(size =8),\n        axis.title.y=element_text(size = 9,\n                              angle = 0,\n                              vjust=0.9),\n        axis.title.x=element_text(size = 9))\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-42-1.png){width=672}\n:::\n:::\n\n\n\n## theme_fivethirtyeight()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npatchwork <- (p1 / p2) | p3\npatchwork & theme_fivethirtyeight() +\n  theme(plot.title=element_text(size =8),\n        axis.title.y=element_text(size = 9,\n                              angle = 0,\n                              vjust=0.9),\n        axis.title.x=element_text(size = 9))\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-43-1.png){width=672}\n:::\n:::\n\n\n\n## theme_tufte()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npatchwork <- (p1 / p2) | p3\npatchwork & theme_tufte() +\n  theme(plot.title=element_text(size =8),\n        axis.title.y=element_text(size = 9,\n                              angle = 0,\n                              vjust=0.9),\n        axis.title.x=element_text(size = 9))\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-44-1.png){width=672}\n:::\n:::\n\n\n\n## theme_excel()\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npatchwork <- (p1 / p2) | p3\npatchwork & theme_excel() +\n  theme(plot.title=element_text(size =8),\n        axis.title.y=element_text(size = 9,\n                              angle = 0,\n                              vjust=0.9),\n        axis.title.x=element_text(size = 9))\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-45-1.png){width=672}\n:::\n:::\n\n\n:::\n\n::: callout-note\n-   Reduced the font size of the `plot. title` to 8 to improve plot's readability\n-   Reduced the font size of the `axis.title.y` to 9 and rotated the y-axis title to vertical (90 degrees) to improve plot's readability\n-   Likewise, reduced the font size of the `axis.title.x` to 9 to improve plot's readability\n:::\n\n\n### 2.6 References\n\n-   Kam, T.S(2023). [2 Beyond ggplot2 Fundamentals](https://r4va.netlify.app/chap02)\n-   [ggrepel](https://www.littlemissdata.com/blog/patchwork)\n-   [ggthemes](https://ggplot2.tidyverse.org/reference/ggtheme.html)\n-   [hrbrthemes](https://cran.r-project.org/web/packages/hrbrthemes/hrbrthemes.pdf)\n-   [ggplot tips: Arranging plots](https://www.r-bloggers.com/2021/10/ggplot-tips-arranging-plots/)\n-   [ggplot2 Theme Elements Demostration](https://henrywang.nl/ggplot2-theme-elements-demonstration/)\n-   [ggplot2 Theme Elements Reference Sheet](https://isabella-b.com/blog/ggplot2-theme-elements-reference/)\n\n#### 2.6.1 Additional references\n\n-   [Quarto_HTML_Code_Blocks](https://quarto.org/docs/output-formats/html-code.html)\n\n### 2.7 Takeaway\n\n::: callout-tip\n## Key takeaways\n\n-   Learnt about the `code-fold` and `code-summary` chunk attributes to hide executable source code. where:\n\n-   Valid values for `code-fold` include:\n\n    | Value   | Behavior                     |\n    |---------|------------------------------|\n    | `false` | No folding (default)         |\n    | `true`  | Fold code (initially hidden) |\n    | `show`  | Fold code (initially shown)  |\n\n-   Learnt about the different R packages\n\n    -   install.packages(\"readr\") library(readr)\n\n    -   install.packages(\"ggplot2\") library(ggplot2)\n\n    -   install.packages(\"ggrepel\") library(ggrepel)\n\n    -   install.packages(\"ggthemes\") library(ggthemes)\n\n-   Enhanced annotations with the use of `ggrepeal` - help to repel overlapping text labels, ensuring clear and readbable annotations\n\n-   Introducing of professional themes with `ggthemes` and `hrbrthemes` - offer additional themes , geoms, and improved asthetics and typography.\n\n-   Combining plots with `patchwork` - allows for the creation of composite figures by combining multiple ggplot2 graphs together.\n:::\n\n<!-- Additional points: -->\n\n<!-- -   install.packages(\"readr\") \\# If not installed library(readr) -->\n\n<!-- -   getwd() -->\n\n<!-- exam_data \\<- read_csv(\"Hands-on_Ex/data/Exam_data.csv\") -->\n\n<!-- install.packages(\"readr\")  -->\n<!-- library(readr) -->\n\n<!-- install.packages(\"ggplot2\")  -->\n\n<!-- library(ggplot2) -->\n\n<!-- install.packages(\"ggrepel\") -->\n\n<!-- library(ggrepel) -->\n\n<!-- install.packages(\"ggthemes\") -->\n\n<!-- library(ggthemes) -->\n\n<!-- library(stringr) -->\n\n",
    "supporting": [
      "Hands-on_Ex02_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}